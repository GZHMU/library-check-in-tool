# 广州医科大学图书馆签到助手

预约了图书馆座位，但临时有事没空去签到要被扣信用分怎么办？这款广医图书馆签到助手可以解你燃眉之急。只需选择你所预约的校区、区域和座位号，即可一键生成签到/签退码（就是座位上的二维码），扫码登录即可实现签到/签退。

### 项目在线地址：

[http://gmulib.atwebpages.com/][online2]（正常访问）

[https://papaya-concha-bee6c3.netlify.app/][online]（已被墙）

## 使用方法

- 方法一：在线地址，打开即用：

  [http://gmulib.atwebpages.com/][online2]

  [https://papaya-concha-bee6c3.netlify.app/][online]

- 方法二：将本项目的 `index.html` 文件部署于服务器

## 实现原理

图书馆签到二维码是一个形如 `http://update.unifound.net/wxnotice/s.aspx?c=<libraryID>_Seat_<seatID>_1EQ` 的链接，其中 `<libraryID>` 是不同校区图书馆ID， `<seatID>` 是座位ID

通过抓包可以发现不同校区图书馆ID如下：

| 校区 | libraryID |
| --------- | ------- |
| 番禺校区 | 100492446 |
| 越秀校区 | 100492751 |

而不同区域座位号与座位ID如下：

注：下表中 `座位数量` 指自习室中的座位数量， `起始seatID` 是座位号为 `1` 的座位的 `seatID`，连续座位号对应的 seatID 也是连续的，比如 1 号座位 seatID 是 103181448，那么 2 号座位的 seatID 就是 103181449，依此类推

### 1. 番禺校区图书馆

| 区域 | roomID | 起始seatID |座位数量 | 
| --- | ---- | :-------: | --------- |
| 二楼自主学习区（番禺） | 103181276 | 103181448 | 62 |
| 二楼自修阅览A区（番禺） | 100492495 | 100494089 | 192 |
| 二楼自修阅览B区（番禺） | 100492768 | 100494281 | 280 |
| 二楼中外文报刊A区（番禺） | 100520430 | 100520437 | 248 |
| 二楼中外文报刊B区（番禺） | 100520432 | 100520685 | 224 |
| 三楼中文图书I（番禺） | 100494034 | 100494561 | 86 |
| 三楼中文图书Ⅱ（番禺） | 100494036 | 100494647 | 128 |
| 四楼中文图书Ⅲ（番禺） | 100494038 | 100494775 | 60 |
| 四楼中文图书Ⅳ（番禺） | 100494040 | 100494835 | 64 |
| 四楼自修阅览区（番禺） | 100494042 | 100494899 | 140 |
| 五楼中文图书Ⅴ（番禺） | 100494044 | 100495039 | 28 |
| 五楼外文书库（番禺） | 100494046 | 100495067 | 68 |
| 五楼中外文过刊（番禺） | 100494048 | 100495135 | 91 |

### 2. 越秀校区图书馆

| 区域 | roomID | 起始seatID |座位数量 | 
| --- | ---- | :-------: | --------- |
| 1楼自修区Ⅰ（越秀） | 100494050 | 100495227 | 104 |
| 1楼自修区Ⅱ（越秀） | 100494052 | 100495331 | 84 |
| 2楼自修区Ⅲ（越秀） | 100494054 | 100495415 | 183 |
| 2楼自修区Ⅳ（越秀） | 100494056 | 100495598 | 75 |
| 3楼休闲阅览区（越秀） | 100494058 | 100495673 | 48 |
| 3楼中外文报刊（越秀） | 100494060 | 100495721 | 16 |
| 4楼中文图书Ⅱ（越秀） | 100494062 | 100495749 | 18 |
| 4楼中文图书Ⅰ（越秀） | 100494066 | 100495737 | 11 |
| 5楼中文图书Ⅳ（越秀） | 100494068 | 100495767 | 22 |

如此，便可以根据以上信息生成签到所需要的链接，比如：

番禺校区的二楼自修阅览A区7号座位，番禺校区对应的 `libraryID` 是 `100492446`，二楼自修阅览A区1号座位对应的 `seatID` 是 `100494089`，那么7号座位的 `seatID` 就是 `100494095`（即100494089+7-1），代入

`http://update.unifound.net/wxnotice/s.aspx?c=<libraryID>_Seat_<seatID>_1EQ`

便得到该座位的签到链接是

`http://update.unifound.net/wxnotice/s.aspx?c=100492446_Seat_100494095_1EQ`

为方便使用，以上表格信息已整理进本项目中的 `data.json` 文件

[online]: https://papaya-concha-bee6c3.netlify.app/
[online2]: http://gmulib.atwebpages.com/
